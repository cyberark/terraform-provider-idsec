---
page_title: "terraform-provider-idsec - idsec_uap_db"
subcategory: idsec_uap_db
description: UAP SIA DB Policy resource.
---

# idsec_uap_db (Resource)

UAP SIA DB Policy resource.

## Example Usage

```terraform
resource "idsec_uap_db" "example_policy" {
  metadata = {
    name        = "example_policy"
    description = "Policy for example database access",
    status = {
      status = "Active"
    },
    policy_entitlement = {
      target_category = "DB",
      location_type   = "FQDN/IP"
    },
    policy_tags = [],
    time_zone   = "Asia/Jerusalem"
  }
  principals = [
    {
      id   = "DPA_Admin_Role",
      name = "DpaAdmin",
      type = "ROLE"
    }
  ]
  conditions = {
    access_window = {
      days_of_the_week = [1, 2, 3, 4, 5, 6],
      from_hour        = "09:00",
      to_hour          = "17:00"
    },
    max_session_duration = 8
  }
  targets = {
    "FQDN/IP" = {
      instances = [
        {
          instance_name         = "example_db_instance",
          instance_type         = "MSSQL",
          instance_id           = "1234",
          authentication_method = "ldap_auth",
          ldap_auth_profile = {
            assign_groups = [
              "HR"
            ]
          }
        }
      ]
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metadata` (Attributes) The policy metadata: ID, name, and additional information (see [below for nested schema](#nestedatt--metadata))
- `principals` (Attributes List) The identity: user, group, role (see [below for nested schema](#nestedatt--principals))

### Optional

- `conditions` (Attributes) The time, session, and idle time conditions of the policy (see [below for nested schema](#nestedatt--conditions))
- `delegation_classification` (String) Indicates the user rights for the policy. Default: Unrestricted
- `targets` (Attributes Map) The targets of the db access policy (see [below for nested schema](#nestedatt--targets))

<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Required:

- `name` (String) A unique name for the access policy - minLength: 1, maxLength: 200
- `policy_entitlement` (Attributes) The policy target category, location type and policy type (see [below for nested schema](#nestedatt--metadata--policy_entitlement))
- `status` (Attributes) The status of the policy (see [below for nested schema](#nestedatt--metadata--status))
- `time_frame` (Attributes) The timeframe that the policy is active. For an unlimited timeframe, leave empty - maxLength: 50 (see [below for nested schema](#nestedatt--metadata--time_frame))

Optional:

- `created_by` (Attributes) The user who created the policy and when (see [below for nested schema](#nestedatt--metadata--created_by))
- `description` (String) A short description about the policy - maximum 200 characters
- `policy_id` (String) The unique identifier of the access policy - minLength: 0, maxLength: 99
- `policy_tags` (List of String) Customized tags to help identify the policy and those similar to it - maximum 20 tags per policy
- `time_zone` (String) The time zone identifier - maxLength: 50, Default: GMT
- `updated_on` (Attributes) The user who updated the policy, and when (see [below for nested schema](#nestedatt--metadata--updated_on))

<a id="nestedatt--metadata--policy_entitlement"></a>
### Nested Schema for `metadata.policy_entitlement`

Required:

- `location_type` (String) The location of the target: Cloud access: AWS, Azure, GCP; Infrastructure access: FQDN/IP
- `target_category` (String) The category of the target: Cloud access: Cloud console; Infrastructure access: VM, DB

Optional:

- `policy_type` (String) The type of policy - Recurring (Cloud console, VM or DB only) or OnDemand. Default - Recurring. required


<a id="nestedatt--metadata--status"></a>
### Nested Schema for `metadata.status`

Optional:

- `link` (String) Link to documentation when available. maxLength: 255
- `status` (String) The status of the policy
- `status_code` (String) The status code. maxLength: 99
- `status_description` (String) A description of the status. maxLength: 1000


<a id="nestedatt--metadata--time_frame"></a>
### Nested Schema for `metadata.time_frame`

Optional:

- `from_time` (String) pattern: yyyy-MM-ddTHH:mm:ss; The date the policy becomes active (in ISO 8601 format e.g. 2000-01-30T13:00:00)
- `to_time` (String) pattern: yyyy-MM-ddTHH:mm:ss; The date the policy expires (in ISO 8601 format e.g. 2000-02-30T13:00:00)


<a id="nestedatt--metadata--created_by"></a>
### Nested Schema for `metadata.created_by`

Optional:

- `time` (String) The date and time the policy was created or modified (read-only)
- `user` (String) The name of the user that modified the policy (read-only) minLength: 1, maxLength: 512


<a id="nestedatt--metadata--updated_on"></a>
### Nested Schema for `metadata.updated_on`

Optional:

- `time` (String) The date and time the policy was created or modified (read-only)
- `user` (String) The name of the user that modified the policy (read-only) minLength: 1, maxLength: 512



<a id="nestedatt--principals"></a>
### Nested Schema for `principals`

Required:

- `id` (String) The unique identifier of the principal in CyberArk. A principal is a user, group, or role. maxLength: 40
- `name` (String) The name of the principal. minLength: 1
- `type` (String) The type of the principal user, group or role

Optional:

- `source_directory_id` (String) The unique identifier of the directory service. (For Cloud console: If the type is ROLE, then this field is optional.)
- `source_directory_name` (String) The name of the directory service.(For Cloud console: if the type is ROLE, then this field is optional and maxLength:256)


<a id="nestedatt--conditions"></a>
### Nested Schema for `conditions`

Required:

- `access_window` (Attributes) The days and times when the user can connect to their target using this policy (see [below for nested schema](#nestedatt--conditions--access_window))

Optional:

- `idle_time` (Number) The maximum idle time before the session ends, in minutes.
- `max_session_duration` (Number) The maximum length of time (in hours) a user can remain connected in a single session. Default: 1

<a id="nestedatt--conditions--access_window"></a>
### Nested Schema for `conditions.access_window`

Optional:

- `days_of_the_week` (Set of Number) The days of the week to include in the policy's access window, where Sunday=0, Monday=1,..., Saturday=6 (comma-separated)
- `from_hour` (String) The start time of the policy's access window (pattern: hh:mm:ss)
- `to_hour` (String) The end time of the policy's access window (pattern: hh:mm:ss)



<a id="nestedatt--targets"></a>
### Nested Schema for `targets`

Optional:

- `instances` (Attributes List) List of database instance targets (see [below for nested schema](#nestedatt--targets--instances))

<a id="nestedatt--targets--instances"></a>
### Nested Schema for `targets.instances`

Optional:

- `authentication_method` (String) The authentication method corresponding to this profile
- `db_auth_profile` (Attributes) The local database authentication profile for this database instance (see [below for nested schema](#nestedatt--targets--instances--db_auth_profile))
- `instance_id` (String) The id of the database instance
- `instance_name` (String) The name of the database instance
- `instance_type` (String) The database type of the database instance
- `ldap_auth_profile` (Attributes) The LDAP authentication profile for this database instance (see [below for nested schema](#nestedatt--targets--instances--ldap_auth_profile))
- `mongo_auth_profile` (Attributes) The MongoDB authentication profile for this database instance (see [below for nested schema](#nestedatt--targets--instances--mongo_auth_profile))
- `oracle_auth_profile` (Attributes) The Oracle database authentication profile for this database instance (see [below for nested schema](#nestedatt--targets--instances--oracle_auth_profile))
- `rds_iam_user_auth_profile` (Attributes) The RDS IAM User authentication profile for this database instance (see [below for nested schema](#nestedatt--targets--instances--rds_iam_user_auth_profile))
- `sqlserver_auth_profile` (Attributes) The SQL Server authentication profile for this database instance (see [below for nested schema](#nestedatt--targets--instances--sqlserver_auth_profile))

<a id="nestedatt--targets--instances--db_auth_profile"></a>
### Nested Schema for `targets.instances.db_auth_profile`

Optional:

- `roles` (List of String) List of roles assigned to the user


<a id="nestedatt--targets--instances--ldap_auth_profile"></a>
### Nested Schema for `targets.instances.ldap_auth_profile`

Optional:

- `assign_groups` (List of String) List of groups to assign to the user


<a id="nestedatt--targets--instances--mongo_auth_profile"></a>
### Nested Schema for `targets.instances.mongo_auth_profile`

Optional:

- `global_builtin_roles` (List of String) List of global built-in roles


<a id="nestedatt--targets--instances--oracle_auth_profile"></a>
### Nested Schema for `targets.instances.oracle_auth_profile`

Optional:

- `dba_role` (Boolean) Indicates if the user has DBA role
- `roles` (List of String) List of roles assigned to the user
- `sysdba_role` (Boolean) Indicates if the user has SYSDBA role
- `sysoper_role` (Boolean) Indicates if the user has SYSOPER role


<a id="nestedatt--targets--instances--rds_iam_user_auth_profile"></a>
### Nested Schema for `targets.instances.rds_iam_user_auth_profile`

Optional:

- `db_user` (String) The database user for RDS IAM User authentication


<a id="nestedatt--targets--instances--sqlserver_auth_profile"></a>
### Nested Schema for `targets.instances.sqlserver_auth_profile`

Optional:

- `global_builtin_roles` (List of String) List of global built-in roles
- `global_custom_roles` (List of String) List of global custom roles




